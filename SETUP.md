# Настройка HTTP-сервиса 1С

## 1. Открой HTTP-сервис

**1С Конфигуратор → HTTP-сервисы → LabIntegration**

## 2. Настройки HTTP-сервиса

Правая кнопка → Свойства:
- **Корневой URL:** `/lab`
- **Аутентификация:** `<Не использовать>`

## 3. URL-шаблоны

Создай 2 метода:

### Метод 1: test
- **Шаблон:** `test`
- **HTTP-метод:** `POST`
- **Обработчик:** `testPOST`
- **Аутентификация:** СНЯТА

### Метод 2: attachResult
- **Шаблон:** `attachResult`
- **HTTP-метод:** `POST`
- **Обработчик:** `attachResultPOST`
- **Аутентификация:** СНЯТА

## 4. Код модуля

Двойной клик на **LabIntegration** → Удали всё → Вставь код из `FINAL-CODE.txt`

## 5. Публикация

**Конфигурация → Обновить конфигурацию базы данных**

## 6. Тест

```bash
curl -X POST http://192.168.100.234/BITtest/hs/lab/test
```

**Ожидается:** `{"status":"ok"}`

### Если получил:
- ✅ `{"status":"ok"}` → **РАБОТАЕТ!**
- ❌ `401` → JWT не отключен (повтори шаг 2-3)
- ❌ `404` → URL неправильный (проверь корневой URL)

## 7. Тест с заказом

```bash
curl -X POST http://192.168.100.234/BITtest/hs/lab/attachResult \
  -H "Content-Type: application/json" \
  -d '{"orderNo":"12345"}'
```

**Ожидается:** `{"error":"not found","orderNo":"12345"}`

Это **нормально** - заказа 12345 нет в базе. Главное что JSON парсится и метод работает!

